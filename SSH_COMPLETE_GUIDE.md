# ğŸ“ Git & GitHub é•¿ä¹…è§£å†³æ–¹æ¡ˆæŒ‡å—

## ä¸ºä»€ä¹ˆä¼šæœ‰è®¤è¯é—®é¢˜ï¼Ÿ

GitHubåœ¨2021å¹´8æœˆåœæ­¢äº†å¯†ç è®¤è¯ï¼ŒåŸå› ï¼š
- å¯†ç å®¹æ˜“è¢«ç›—
- å¯†ç å®¹æ˜“æ³„éœ²
- ä¸å¤Ÿå®‰å…¨

ç°åœ¨å¿…é¡»ä½¿ç”¨ï¼š
1. **Personal Access Token** (ä¸´æ—¶ï¼Œéœ€è¦å®šæœŸæ›´æ–°)
2. **SSH Key** (æ°¸ä¹…ï¼Œä¸€æ¬¡è®¾ç½®ç»ˆèº«ä½¿ç”¨) â­ **æ¨è**

---

## ğŸ” ç»ˆæè§£å†³æ–¹æ¡ˆï¼šSSH Key

### ä»€ä¹ˆæ˜¯SSH Keyï¼Ÿ

SSH Keyæ˜¯ä¸€å¯¹å¯†é’¥ï¼š
- **Private Key (ç§é’¥)**: ä¿å­˜åœ¨ä½ ç”µè„‘ä¸Šï¼Œç»ä¸åˆ†äº«
- **Public Key (å…¬é’¥)**: æ·»åŠ åˆ°GitHubï¼Œå¯ä»¥å…¬å¼€

å·¥ä½œåŸç†ï¼š
```
ä½ çš„ç”µè„‘ â†--[åŠ å¯†é€šä¿¡]-â†’ GitHub
  (ç§é’¥)                    (å…¬é’¥)
```

### ä¸ºä»€ä¹ˆSSHæ˜¯æœ€ä½³æ–¹æ¡ˆï¼Ÿ

âœ… **ä¸€æ¬¡è®¾ç½®ï¼Œæ°¸ä¹…ä½¿ç”¨**
- ä¸éœ€è¦è®°ä½token
- ä¸éœ€è¦å®šæœŸæ›´æ–°
- è‡ªåŠ¨è®¤è¯

âœ… **æ›´å®‰å…¨**
- ç§é’¥ä¸ä¼šæ³„éœ²
- æ— æ³•è¢«çªƒå–
- åŠ å¯†é€šä¿¡

âœ… **æ›´æ–¹ä¾¿**
- ä¸éœ€è¦æ¯æ¬¡è¾“å…¥å¯†ç 
- æ”¯æŒå¤šå°ç”µè„‘
- æ ‡å‡†è¡Œä¸šåšæ³•

---

## ğŸš€ å¿«é€Ÿè®¾ç½®ï¼ˆ5åˆ†é’Ÿï¼‰

### ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰

```bash
cd "/Users/andyzhang/Desktop/26_Spring/Asset_Management/-Pre-first class readings/mvp_web"

./setup_ssh.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. ç”ŸæˆSSHå¯†é’¥
2. é…ç½®SSH agent
3. é…ç½®SSH configæ–‡ä»¶
4. æ˜¾ç¤ºpublic key
5. æµ‹è¯•è¿æ¥
6. æ¨é€ä»£ç 

---

## ğŸ“– æ‰‹åŠ¨è®¾ç½®ï¼ˆå­¦ä¹ ç‰ˆï¼‰

### æ­¥éª¤1ï¼šç”ŸæˆSSHå¯†é’¥

```bash
# ç”Ÿæˆæ–°çš„SSHå¯†é’¥å¯¹
ssh-keygen -t ed25519 -C "your_email@example.com"

# ä¼šè¯¢é—®ä¸‰ä¸ªé—®é¢˜ï¼š
# 1. ä¿å­˜ä½ç½®ï¼šç›´æ¥æŒ‰Enterï¼ˆä½¿ç”¨é»˜è®¤ ~/.ssh/id_ed25519ï¼‰
# 2. å¯†ç ï¼šç›´æ¥æŒ‰Enterï¼ˆä¸è®¾å¯†ç ï¼‰æˆ–è¾“å…¥å¯†ç å¢åŠ å®‰å…¨æ€§
# 3. ç¡®è®¤å¯†ç ï¼šå†æŒ‰Enteræˆ–è¾“å…¥ç›¸åŒå¯†ç 
```

**ç†è§£**ï¼š
- `-t ed25519`: ä½¿ç”¨Ed25519ç®—æ³•ï¼ˆç°ä»£ã€å®‰å…¨ã€å¿«é€Ÿï¼‰
- `-C "email"`: æ·»åŠ æ³¨é‡Šï¼ˆé€šå¸¸ç”¨é‚®ç®±ï¼‰
- ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š
  - `id_ed25519`: ç§é’¥ï¼ˆä¿å¯†ï¼ï¼‰
  - `id_ed25519.pub`: å…¬é’¥ï¼ˆå¯åˆ†äº«ï¼‰

### æ­¥éª¤2ï¼šå¯åŠ¨SSH agent

```bash
# å¯åŠ¨SSH agent
eval "$(ssh-agent -s)"

# æ·»åŠ ç§é’¥åˆ°agent
ssh-add ~/.ssh/id_ed25519
```

**ç†è§£**ï¼š
- SSH agent: ç®¡ç†ä½ çš„ç§é’¥
- æ·»åŠ åˆ°agentåï¼Œä¸éœ€è¦æ¯æ¬¡è¾“å…¥å¯†ç 

### æ­¥éª¤3ï¼šé…ç½®SSH config

åˆ›å»ºæˆ–ç¼–è¾‘ `~/.ssh/config`ï¼š

```bash
nano ~/.ssh/config
```

æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519
    AddKeysToAgent yes
    UseKeychain yes
```

ä¿å­˜ï¼š`Ctrl+O`, `Enter`, `Ctrl+X`

**ç†è§£**ï¼š
- æ¯æ¬¡è¿æ¥github.comè‡ªåŠ¨ä½¿ç”¨è¿™ä¸ªé…ç½®
- è‡ªåŠ¨ä½¿ç”¨æŒ‡å®šçš„ç§é’¥
- Macä¼šå°†å¯†é’¥ä¿å­˜åˆ°Keychain

### æ­¥éª¤4ï¼šå¤åˆ¶å…¬é’¥

```bash
# æ˜¾ç¤ºå…¬é’¥
cat ~/.ssh/id_ed25519.pub

# æˆ–è€…ç›´æ¥å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆMacï¼‰
cat ~/.ssh/id_ed25519.pub | pbcopy
```

### æ­¥éª¤5ï¼šæ·»åŠ åˆ°GitHub

1. è®¿é—®ï¼šhttps://github.com/settings/keys
2. ç‚¹å‡» **"New SSH key"**
3. å¡«å†™ï¼š
   - **Title**: `My Mac` (æˆ–ä»»ä½•ä½ å–œæ¬¢çš„åå­—)
   - **Key type**: `Authentication Key`
   - **Key**: ç²˜è´´å…¬é’¥ï¼ˆä»¥ `ssh-ed25519 AAAA...` å¼€å¤´ï¼‰
4. ç‚¹å‡» **"Add SSH key"**
5. å¯èƒ½éœ€è¦è¾“å…¥GitHubå¯†ç ç¡®è®¤

### æ­¥éª¤6ï¼šæµ‹è¯•è¿æ¥

```bash
ssh -T git@github.com

# é¦–æ¬¡è¿æ¥ä¼šé—®ï¼š
# Are you sure you want to continue connecting (yes/no)?
# è¾“å…¥: yes

# æˆåŠŸä¼šæ˜¾ç¤ºï¼š
# Hi ä½ çš„ç”¨æˆ·å! You've successfully authenticated, but GitHub does not provide shell access.
```

### æ­¥éª¤7ï¼šä½¿ç”¨SSH URL

```bash
# æ”¹ç”¨SSH URL
git remote remove origin
git remote add origin git@github.com:ä½ çš„ç”¨æˆ·å/ä»“åº“å.git

# æ¨é€
git push -u origin main
```

**æ³¨æ„URLæ ¼å¼å·®å¼‚**ï¼š
- HTTPS: `https://github.com/ç”¨æˆ·å/ä»“åº“å.git`
- SSH: `git@github.com:ç”¨æˆ·å/ä»“åº“å.git`

---

## ğŸ”§ æ—¥å¸¸ä½¿ç”¨

### å…‹éš†ä»“åº“

```bash
# ä½¿ç”¨SSH URL
git clone git@github.com:ç”¨æˆ·å/ä»“åº“å.git
```

### æ¨é€ä»£ç 

```bash
git add .
git commit -m "Update"
git push
```

ä¸éœ€è¦è¾“å…¥ä»»ä½•å¯†ç æˆ–tokenï¼

---

## ğŸ¯ å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ

### åœºæ™¯1ï¼šæ–°ç”µè„‘è®¾ç½®

åœ¨æ–°ç”µè„‘ä¸Šï¼š

1. è¿è¡Œ `./setup_ssh.sh`
2. æˆ–è€…å¤åˆ¶æ—§ç”µè„‘çš„ `~/.ssh/id_ed25519` å’Œ `id_ed25519.pub`
3. å¦‚æœç”Ÿæˆæ–°å¯†é’¥ï¼Œéœ€è¦æ·»åŠ åˆ°GitHub

**å»ºè®®**ï¼šæ¯å°ç”µè„‘ç”¨ä¸åŒçš„SSH keyï¼Œåœ¨GitHubä¸­ç”¨ä¸åŒåå­—æ ‡è¯†ã€‚

### åœºæ™¯2ï¼šå¤šä¸ªGitHubè´¦å·

ç¼–è¾‘ `~/.ssh/config`ï¼š

```
# ä¸ªäººè´¦å·
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal

# å·¥ä½œè´¦å·
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
```

ä½¿ç”¨æ—¶ï¼š
```bash
# ä¸ªäººé¡¹ç›®
git clone git@github.com:personal-user/repo.git

# å·¥ä½œé¡¹ç›®  
git clone git@github-work:work-user/repo.git
```

### åœºæ™¯3ï¼šç°æœ‰é¡¹ç›®åˆ‡æ¢åˆ°SSH

```bash
# æŸ¥çœ‹å½“å‰remote
git remote -v

# å¦‚æœæ˜¯HTTPSï¼Œåˆ‡æ¢åˆ°SSH
git remote set-url origin git@github.com:ç”¨æˆ·å/ä»“åº“å.git

# éªŒè¯
git remote -v
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šPermission denied (publickey)

**åŸå› **ï¼š
- SSH keyæ²¡æœ‰æ·»åŠ åˆ°GitHub
- SSH agentæ²¡æœ‰è¿è¡Œ
- ä½¿ç”¨äº†é”™è¯¯çš„key

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥SSH agent
ssh-add -l

# å¦‚æœæ˜¾ç¤º "Could not open a connection"
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_ed25519

# æµ‹è¯•è¿æ¥
ssh -T git@github.com
```

### é—®é¢˜2ï¼šHost key verification failed

**åŸå› **ï¼šé¦–æ¬¡è¿æ¥æˆ–GitHubæ›´æ”¹äº†host key

**è§£å†³**ï¼š
```bash
# åˆ é™¤æ—§çš„host key
ssh-keygen -R github.com

# é‡æ–°è¿æ¥
ssh -T git@github.com
# è¾“å…¥ yes
```

### é—®é¢˜3ï¼šCould not read from remote repository

**åŸå› **ï¼š
- ä»“åº“ä¸å­˜åœ¨
- æ²¡æœ‰è®¿é—®æƒé™
- URLé”™è¯¯

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥remote URL
git remote -v

# ç¡®è®¤URLæ ¼å¼ï¼šgit@github.com:ç”¨æˆ·å/ä»“åº“å.git
# ç¡®è®¤ä»“åº“å­˜åœ¨
# ç¡®è®¤SSH keyå·²æ·»åŠ åˆ°è¯¥è´¦å·
```

---

## ğŸ“š æ·±å…¥ç†è§£

### SSHè®¤è¯æµç¨‹

1. **ä½ å‘èµ·è¿æ¥**ï¼š`git push`
2. **GitHubå‘é€æŒ‘æˆ˜**ï¼š"è¯æ˜ä½ æœ‰ç§é’¥"
3. **ä½ çš„ç”µè„‘ç”¨ç§é’¥ç­¾å**ï¼šä¸å‘é€ç§é’¥æœ¬èº«
4. **GitHubç”¨å…¬é’¥éªŒè¯**ï¼šç­¾åæ˜¯å¦åŒ¹é…
5. **è®¤è¯æˆåŠŸ**ï¼šå…è®¸æ“ä½œ

### ä¸ºä»€ä¹ˆå®‰å…¨ï¼Ÿ

- ç§é’¥æ°¸è¿œä¸ç¦»å¼€ä½ çš„ç”µè„‘
- æ¯æ¬¡ç­¾åéƒ½ä¸åŒï¼ˆæ—¶é—´æˆ³ï¼‰
- æ— æ³•é€šè¿‡å…¬é’¥æ¨å¯¼ç§é’¥ï¼ˆæ•°å­¦ä¸Šä¸å¯è¡Œï¼‰
- å³ä½¿æœ‰äººæˆªè·é€šä¿¡ï¼Œä¹Ÿæ— æ³•ä¼ªé€ 

### æ–‡ä»¶æƒé™é‡è¦æ€§

SSHè¦æ±‚ä¸¥æ ¼çš„æ–‡ä»¶æƒé™ï¼š

```bash
# æ­£ç¡®çš„æƒé™
chmod 700 ~/.ssh                    # åªæœ‰ä½ èƒ½è®¿é—®
chmod 600 ~/.ssh/id_ed25519        # ç§é’¥ï¼šåªæœ‰ä½ èƒ½è¯»å†™
chmod 644 ~/.ssh/id_ed25519.pub    # å…¬é’¥ï¼šæ‰€æœ‰äººèƒ½è¯»
chmod 600 ~/.ssh/config            # é…ç½®ï¼šåªæœ‰ä½ èƒ½è¯»å†™
```

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. ä¸ºä¸åŒè®¾å¤‡åˆ›å»ºä¸åŒå¯†é’¥

```bash
# MacBook
ssh-keygen -t ed25519 -C "email@example.com" -f ~/.ssh/id_ed25519_macbook

# iMac
ssh-keygen -t ed25519 -C "email@example.com" -f ~/.ssh/id_ed25519_imac
```

åœ¨GitHubä¸­ç”¨ä¸åŒåå­—æ ‡è¯†ï¼ˆ"MacBook Pro", "iMac"ï¼‰ã€‚

### 2. å®šæœŸå®¡æŸ¥SSH keys

è®¿é—®ï¼šhttps://github.com/settings/keys

åˆ é™¤ä¸å†ä½¿ç”¨çš„å¯†é’¥ï¼ˆæ—§ç”µè„‘ã€ä¸¢å¤±çš„è®¾å¤‡ç­‰ï¼‰ã€‚

### 3. ä½¿ç”¨å¯†ç ä¿æŠ¤ç§é’¥ï¼ˆå¯é€‰ï¼‰

ç”Ÿæˆå¯†é’¥æ—¶è®¾ç½®å¯†ç ï¼š
```bash
ssh-keygen -t ed25519 -C "email@example.com"
# è¾“å…¥å¯†ç æ—¶è¾“å…¥ä¸€ä¸ªå¼ºå¯†ç 
```

ä¼˜ç‚¹ï¼šå³ä½¿ç§é’¥è¢«ç›—ä¹Ÿæ— æ³•ä½¿ç”¨
ç¼ºç‚¹ï¼šæ¯æ¬¡ä½¿ç”¨éƒ½è¦è¾“å…¥å¯†ç ï¼ˆå¯ç”¨ssh-agentç¼“è§£ï¼‰

### 4. å¤‡ä»½ç§é’¥ï¼ˆå®‰å…¨åœ°ï¼‰

```bash
# å¤‡ä»½åˆ°åŠ å¯†çš„å¤–éƒ¨å­˜å‚¨
cp ~/.ssh/id_ed25519 /path/to/secure/backup/

# æˆ–ä½¿ç”¨å¯†ç ç®¡ç†å™¨
```

### 5. å®šæœŸè½®æ¢å¯†é’¥ï¼ˆå¯é€‰ï¼‰

æ¯1-2å¹´ç”Ÿæˆæ–°å¯†é’¥ï¼Œåˆ é™¤æ—§å¯†é’¥ã€‚

---

## ğŸ†˜ ç´§æ€¥æƒ…å†µ

### ç§é’¥æ³„éœ²äº†æ€ä¹ˆåŠï¼Ÿ

1. **ç«‹å³åˆ é™¤GitHubä¸Šçš„å…¬é’¥**ï¼š
   - è®¿é—®ï¼šhttps://github.com/settings/keys
   - æ‰¾åˆ°å¯¹åº”çš„key
   - ç‚¹å‡» "Delete"

2. **ç”Ÿæˆæ–°å¯†é’¥**ï¼š
   ```bash
   # åˆ é™¤æ—§å¯†é’¥
   rm ~/.ssh/id_ed25519*
   
   # ç”Ÿæˆæ–°å¯†é’¥
   ssh-keygen -t ed25519 -C "email@example.com"
   
   # æ·»åŠ æ–°å…¬é’¥åˆ°GitHub
   ```

3. **æ›´æ–°æ‰€æœ‰ä½¿ç”¨SSHçš„æœåŠ¡**

### ç”µè„‘ä¸¢å¤±/è¢«ç›—ï¼Ÿ

1. ç™»å½•GitHub
2. è®¿é—®ï¼šhttps://github.com/settings/keys
3. åˆ é™¤è¯¥ç”µè„‘çš„SSH key
4. è¯¥è®¾å¤‡å°†ç«‹å³æ— æ³•è®¿é—®ä½ çš„ä»“åº“

---

## âœ… æ£€æŸ¥æ¸…å•

è®¾ç½®å®Œæˆåï¼Œç¡®è®¤ï¼š

- [ ] SSHå¯†é’¥å·²ç”Ÿæˆï¼ˆ`ls ~/.ssh/id_ed25519*`ï¼‰
- [ ] SSH configå·²é…ç½®ï¼ˆ`cat ~/.ssh/config`ï¼‰
- [ ] å…¬é’¥å·²æ·»åŠ åˆ°GitHub
- [ ] SSHè¿æ¥æµ‹è¯•æˆåŠŸï¼ˆ`ssh -T git@github.com`ï¼‰
- [ ] Git remoteä½¿ç”¨SSH URLï¼ˆ`git remote -v`ï¼‰
- [ ] èƒ½å¤Ÿæ­£å¸¸æ¨é€ä»£ç ï¼ˆ`git push`ï¼‰
- [ ] æ–‡ä»¶æƒé™æ­£ç¡®

---

## ğŸ¯ æ€»ç»“

### çŸ­æœŸæ–¹æ¡ˆï¼ˆTokenï¼‰

âœ… å¿«é€Ÿè®¾ç½®
âŒ éœ€è¦å®šæœŸæ›´æ–°
âŒ å®¹æ˜“å¿˜è®°
âŒ éœ€è¦ä¿å­˜token

### é•¿æœŸæ–¹æ¡ˆï¼ˆSSHï¼‰â­

âœ… ä¸€æ¬¡è®¾ç½®ï¼Œæ°¸ä¹…ä½¿ç”¨
âœ… æ›´å®‰å…¨
âœ… æ›´æ–¹ä¾¿
âœ… è¡Œä¸šæ ‡å‡†

**ç°åœ¨å°±è¿è¡Œï¼š**
```bash
./setup_ssh.sh
```

**5åˆ†é’Ÿåï¼Œä½ å°†æ°¸è¿œä¸ç”¨æ‹…å¿ƒGitHubè®¤è¯é—®é¢˜ï¼**
